O	0	3	How
O	4	6	do
O	7	8	I
O	9	13	send
O	14	19	video
O	20	25	files
O	26	30	that
O	31	34	are
O	35	40	being
O	41	51	transcoded
O	52	56	live
O	57	61	with
B-PL	62	68	Python
O	69	70	'
O	71	72	s
B-API	73	84	Twisted.web
O	84	85	?

O	86	89	I'm
O	90	98	building
O	99	100	a
O	101	106	video
O	107	115	streamer
O	116	121	using
B-PL	122	128	Python
O	129	130	'
O	131	132	s
B-API	133	144	Twisted.web
O	145	149	with
O	150	159	callbacks
O	160	162	to
B-Fram	163	169	ffmpeg
O	169	170	.

O	171	174	I'm
O	175	184	wondering
O	184	185	,
O	186	191	since
O	192	195	I'm
O	196	203	sending
O	204	207	the
O	208	213	files
O	214	221	through
O	222	227	using
O	228	229	'
O	230	236	return
B-API	237	248	file.read()
O	249	250	'
O	251	259	there'll
O	260	262	be
O	263	271	problems
O	272	276	with
O	277	284	sending
O	285	288	the
O	289	299	transcoded
O	300	306	output
O	307	312	since
O	313	315	it
O	316	321	won't
O	322	324	be
O	325	334	available
O	335	337	to
O	338	340	be
O	341	345	read
O	346	348	in
O	349	357	entirety
O	357	358	?

O	359	361	Am
O	362	363	I
O	364	368	over
O	369	377	thinking
O	378	382	this
O	383	386	and
O	387	389	it
O	390	391	'
O	392	393	s
O	394	397	all
O	398	405	managed
O	406	408	by
B-API	409	420	Twisted.web
O	421	422	'
O	423	424	s
O	425	428	low
O	429	434	level
O	435	445	management
O	446	450	code
O	451	453	or
O	454	456	do
O	457	458	I
O	459	463	have
O	464	466	to
O	467	474	rethink
O	475	477	my
O	478	484	method
O	484	485	?

O	486	498	Additionally
O	498	499	,
O	500	503	how
O	504	507	can
O	508	509	I
O	510	517	support
O	518	524	people
O	525	533	skipping
O	534	539	ahead
O	540	542	to
O	543	548	parts
O	549	551	of
O	552	555	the
O	556	561	video
O	562	566	that
O	567	574	haven't
O	575	583	buffered
O	584	587	for
O	588	592	them
O	592	593	?

O	594	595	I
O	596	602	expect
O	603	605	it
O	606	608	to
O	609	611	be
O	612	613	a
O	614	620	really
O	621	632	complicated
O	632	633	,
O	634	637	but
O	638	642	just
O	643	649	incase
O	650	652	it
O	653	658	isn't
O	658	659	.

O	660	666	Thanks

O	667	668	1
O	668	669	)
O	670	673	Can
O	674	675	I
O	676	679	use
B-API	680	691	file.read()
O	692	694	in
B-Fram	695	702	twisted
O	702	703	?

O	704	707	The
O	708	713	short
O	714	720	answer
O	721	723	is
O	724	725	"
O	725	727	no
O	727	728	"
O	728	729	.

O	730	736	Unless
O	737	743	you've
O	744	748	done
O	749	750	a
O	751	756	bunch
O	757	759	of
O	760	765	other
O	766	776	relatively
O	777	788	complicated
O	789	795	things
O	795	796	,
O	797	801	such
O	802	804	as
O	805	808	set
B-API	809	819	O_NONBLOCK
O	820	822	on
O	823	826	the
O	827	829	fd
O	829	830	,
O	831	833	or
O	834	844	explicitly
O	845	854	delegated
O	855	859	this
O	860	867	request
O	868	870	to
O	871	879	separate
O	880	886	thread
O	886	887	,
B-API	888	899	file.read()
O	900	902	is
O	903	904	a
O	905	913	blocking
O	914	918	call
O	918	919	,
O	920	924	that
O	925	929	will
O	930	934	read
O	935	938	the
O	939	947	entirety
O	948	950	of
O	951	954	the
O	955	959	file
O	960	964	into
O	965	971	memory
O	972	978	before
O	979	981	it
O	982	989	returns
O	989	990	.

O	991	996	While
O	997	1001	this
O	1002	1006	data
O	1007	1009	is
O	1010	1015	being
O	1016	1020	read
O	1021	1025	from
O	1026	1030	disk
O	1031	1044	synchronously
O	1044	1045	,
B-Fram	1046	1053	Twisted
O	1054	1055	'
O	1056	1057	s
O	1058	1065	reactor
O	1066	1070	will
O	1071	1073	be
O	1074	1080	unable
O	1081	1083	to
O	1084	1090	invoke
O	1091	1094	any
O	1095	1104	callbacks
O	1105	1107	or
O	1108	1112	read
O	1113	1115	or
O	1116	1121	write
O	1122	1125	any
O	1126	1135	available
O	1136	1140	data
O	1141	1143	on
O	1144	1147	any
O	1148	1151	fds
O	1151	1152	,
O	1153	1160	causing
O	1161	1164	any
O	1165	1170	other
O	1171	1178	pending
O	1179	1187	requests
O	1188	1190	or
O	1191	1200	streaming
O	1201	1210	transfers
O	1211	1213	to
O	1214	1219	grind
O	1220	1222	to
O	1223	1224	a
O	1225	1233	complete
O	1234	1238	halt
O	1239	1244	while
O	1245	1249	your
O	1250	1254	file
O	1255	1257	is
O	1258	1263	being
O	1264	1268	read
O	1269	1273	into
O	1274	1280	memory
O	1280	1281	.

O	1282	1290	Moreover
O	1290	1291	,
O	1292	1294	if
O	1295	1298	the
O	1299	1305	source
O	1306	1312	volume
O	1313	1315	of
O	1316	1319	the
O	1320	1324	file
O	1325	1327	is
O	1328	1333	under
O	1334	1339	heavy
O	1340	1344	load
O	1345	1348	and
O	1349	1350	/
O	1351	1353	or
O	1354	1359	there
O	1360	1363	are
O	1364	1368	lots
O	1369	1371	of
O	1372	1377	files
O	1377	1378	,
O	1379	1383	even
O	1384	1387	the
B-API	1388	1394	open()
O	1395	1400	calls
O	1401	1403	to
O	1404	1407	get
O	1408	1412	file
O	1413	1420	objects
O	1421	1424	may
O	1425	1430	block
O	1431	1434	for
O	1435	1436	a
O	1437	1448	significant
O	1449	1455	amount
O	1456	1458	of
O	1459	1463	time
O	1463	1464	.

O	1465	1470	There
O	1471	1473	is
O	1474	1476	no
O	1477	1488	nonblocking
O	1489	1493	open
O	1493	1494	,
O	1495	1497	so
O	1498	1500	if
O	1501	1504	you
O	1505	1509	need
O	1510	1511	a
O	1512	1516	file
O	1517	1523	object
O	1523	1524	,
O	1525	1528	you
O	1529	1535	should
O	1536	1539	use
B-API	1540	1563	reactor.deferToThread()
O	1564	1566	if
O	1567	1570	you
O	1571	1575	need
O	1576	1578	to
O	1579	1582	get
O	1583	1584	a
O	1585	1592	regular
O	1593	1597	file
O	1598	1604	object
O	1605	1607	in
B-Fram	1608	1615	twisted
O	1615	1616	.

O	1617	1619	So
O	1620	1624	here
O	1625	1626	'
O	1627	1628	s
O	1629	1633	what
O	1634	1637	you
O	1638	1644	should
O	1645	1647	do
O	1648	1649	:

O	1650	1653	For
O	1654	1661	reading
O	1662	1667	files
O	1668	1676	directly
O	1677	1681	from
O	1682	1685	the
O	1686	1696	filesystem
O	1697	1701	with
B-Fram	1702	1709	twisted
O	1709	1710	,
O	1711	1714	you
O	1715	1721	should
O	1722	1726	look
O	1727	1731	into
B-API	1732	1755	twisted.web.server.Site
O	1756	1759	and
B-API	1760	1783	twisted.web.static.File
O	1783	1784	.

O	1785	1790	There
O	1791	1792	'
O	1793	1794	s
O	1795	1797	an
O	1798	1809	interesting
O	1810	1818	tutorial
O	1819	1821	on
O	1822	1826	them
O	1827	1831	here
O	1831	1832	.

O	1833	1836	Not
O	1837	1841	only
O	1842	1846	will
O	1847	1852	these
O	1853	1858	calls
O	1859	1865	stream
O	1866	1869	the
O	1870	1874	file
O	1875	1882	content
O	1883	1887	from
O	1888	1892	disk
O	1892	1893	,
O	1894	1897	but
O	1898	1902	they
O	1903	1907	will
O	1908	1912	also
O	1913	1920	support
O	1921	1931	additional
B-Stan	1932	1936	HTTP
O	1937	1945	features
O	1946	1949	for
O	1950	1956	static
O	1957	1962	files
O	1962	1963	,
O	1964	1968	such
O	1969	1971	as
B-Stan	1972	1976	HTTP
O	1977	1982	Range
O	1983	1991	requests
O	1991	1992	.

O	1993	1994	2
O	1994	1995	)
O	1996	1999	How
O	2000	2003	can
O	2004	2005	I
O	2006	2013	support
O	2014	2020	people
O	2021	2029	skipping
O	2030	2035	ahead
O	2036	2038	to
O	2039	2044	parts
O	2045	2047	of
O	2048	2051	the
O	2052	2057	video
O	2058	2062	that
O	2063	2070	haven't
O	2071	2079	buffered
O	2080	2083	for
O	2084	2088	them
O	2088	2089	?

O	2090	2094	This
O	2095	2097	is
O	2098	2106	commonly
O	2107	2115	referred
O	2116	2118	to
O	2119	2121	as
O	2122	2131	scrubbing
O	2131	2132	,
O	2133	2136	and
O	2137	2142	there
O	2143	2146	are
O	2147	2156	basically
O	2157	2160	two
O	2161	2166	kinds
O	2167	2169	of
O	2170	2179	scrubbing
O	2180	2181	:
B-PL	2182	2187	HTML5
O	2188	2197	scrubbing
O	2198	2201	and
O	2202	2212	time-based
O	2213	2222	scrubbing
O	2222	2223	.

O	2224	2227	The
O	2228	2234	former
O	2235	2236	(
B-PL	2236	2241	HTML5
O	2242	2251	scrubbing
O	2251	2252	)
O	2253	2255	is
O	2256	2260	just
O	2261	2262	a
O	2263	2268	fancy
O	2269	2272	way
O	2273	2275	of
O	2276	2282	saying
O	2283	2284	"
B-Stan	2284	2288	HTTP
O	2289	2294	Range
O	2295	2303	requests
O	2303	2304	"
O	2304	2305	,
O	2306	2309	and
O	2310	2312	is
O	2313	2322	supported
O	2323	2325	by
O	2326	2332	native
O	2333	2341	browsers
O	2342	2345	and
O	2346	2353	plugins
O	2353	2354	,
O	2355	2359	such
O	2360	2362	as
B-Fram	2363	2369	Safari
I-Fram	2370	2376	Mobile
O	2376	2377	,
B-Fram	2378	2387	Quicktime
O	2387	2388	,
B-Fram	2389	2396	mplayer
O	2396	2397	,
O	2398	2401	and
O	2402	2405	all
O	2406	2414	browsers
O	2415	2419	that
O	2420	2429	implement
O	2430	2433	the
B-PL	2434	2439	html5
O	2440	2443	tag
O	2443	2444	.

O	2445	2449	This
O	2450	2452	is
O	2453	2462	supported
O	2463	2465	by
O	2466	2469	the
B-API	2470	2493	twisted.web.static.File
O	2494	2495	I
O	2496	2505	mentioned
O	2506	2508	in
O	2509	2511	my
O	2512	2518	answer
O	2519	2521	to
O	2522	2525	the
O	2526	2531	first
O	2532	2540	question
O	2540	2541	.

O	2542	2545	The
O	2546	2552	latter
O	2553	2554	(
O	2554	2564	time-based
O	2565	2574	scrubbing
O	2574	2575	)
O	2576	2578	is
O	2579	2582	the
O	2583	2589	legacy
O	2590	2593	way
O	2594	2596	of
O	2597	2607	supporting
O	2608	2617	scrubbing
O	2617	2618	.

O	2619	2621	It
O	2622	2624	is
O	2625	2634	basically
O	2635	2637	an
O	2638	2647	agreement
O	2648	2655	between
O	2656	2657	a
O	2658	2664	custom
O	2665	2671	player
O	2672	2673	(
O	2673	2677	such
O	2678	2680	as
B-Fram	2681	2689	jwplayer
O	2690	2692	or
B-Fram	2693	2697	OSMF
O	2697	2698	)
O	2699	2702	and
O	2703	2704	a
O	2705	2711	server
O	2712	2716	that
O	2717	2723	allows
O	2724	2727	the
O	2728	2734	player
O	2735	2737	to
O	2738	2745	request
O	2746	2749	the
O	2750	2755	video
O	2756	2764	starting
O	2765	2767	at
O	2768	2769	a
O	2770	2774	time
O	2775	2781	offset
O	2782	2791	specified
O	2792	2794	by
O	2795	2796	a
O	2797	2804	certain
O	2805	2810	query
O	2811	2820	parameter
O	2820	2821	.

O	2822	2826	This
O	2827	2830	can
O	2831	2833	be
O	2834	2838	done
O	2839	2846	hackily
O	2847	2849	by
O	2850	2858	starting
B-Fram	2859	2865	ffmpeg
O	2866	2868	in
O	2869	2870	a
O	2871	2881	subprocess
O	2882	2886	with
O	2887	2890	the
O	2891	2901	-itsoffset
O	2902	2911	parameter
O	2912	2918	pulled
O	2919	2923	from
O	2924	2927	the
O	2928	2936	required
O	2937	2942	query
O	2943	2952	parameter
O	2952	2953	,
O	2954	2959	using
O	2960	2964	some
O	2965	2970	input
O	2971	2975	file
O	2976	2980	from
O	2981	2985	disk
O	2985	2986	,
O	2987	2989	or
O	2990	2995	using
O	2996	2997	a
O	2998	3004	module
O	3005	3007	in
O	3008	3012	your
O	3013	3021	favorite
O	3022	3031	webserver
O	3031	3032	.

O	3033	3039	Either
O	3040	3043	way
O	3044	3052	requires
O	3053	3054	a
O	3055	3061	player
O	3062	3066	that
O	3067	3078	understands
O	3079	3083	what
O	3084	3089	query
O	3090	3099	parameter
O	3100	3102	to
O	3103	3107	send
O	3107	3108	.
