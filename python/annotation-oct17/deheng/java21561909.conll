Finding	O
Angle	O
from	O
transform	O
matrix	O

I	O
have	O
a	O
transform	O
matrix	O
with	O
values	O
like	O
this	O
.	O

Transform	O
:	O
xx	O
,	O
xy	O
,	O
yx	O
,	O
yy	O
,	O
tx	O
,	O
and	O
ty	O
respectively	O
.	O

How	O
can	O
I	O
find	O
the	O
angle	O
from	O
the	O
above	O
set	O
of	O
gives	O
values	O
.	O

Referring	O
to	O
the	O
Wikipedia	O
page	O
on	O
transformation	O
matrices	O
:	O
http://en.wikipedia.org/wiki/Transformation_matrix#Affine_transformations	O
.	O

tx	O
and	O
ty	O
are	O
translations	O
.	O

The	O
remaining	O
elements	O
make	O
up	O
a	O
rotation	O
matrix	O
:	O

Note	O
that	O
this	O
is	O
equivalent	O
to	O

where	O
?	O

is	O
the	O
clockwise	O
rotation	O
angle	O
.	O

From	O
this	O
you	O
get	O
that	O
xx	O
=	O
yy	O
=	O
cos	O
(	O
?	O
)	O
and	O
xy	O
=	O
-yx	O
=	O
sin	O
(	O
?	O
)	O
.	O

The	O
angle	O
can	O
be	O
calculated	O
as	O
Math.atan2	B-API
(	O
xy	O
,	O
xx	O
)	O
.	O

This	O
will	O
give	O
you	O
a	O
result	O
that	O
is	O
between	O
-	O
?	O
and	O
?	O

.	O
Math.acos	B-API
(	O
xx	O
)	O
,	O
Math.acos	B-API
(	O
yy	O
)	O
,	O
Math.asin	B-API
(	O
xy	O
)	O
,	O
Math.asin	B-API
(	O
-yx	O
)	O
and	O
-	O
Math.asin	B-API
(	O
yx	O
)	O
all	O
work	O
for	O
angles	O
between	O
zero	O
than	O
?	O

/	O
2	O
.	O

Those	O
6	O
numbers	O
describe	O
an	O
affine	O
transformation	O
,	O
which	O
in	O
general	O
consists	O
of	O
(	O
non-uniform	O
)	O
scaling	O
,	O
rotation	O
and	O
translation	O
.	O

The	O
translation	O
is	O
represented	O
by	O
(	O
tx	O
,	O
ty	O
)	O
.	O

This	O
leaves	O
the	O
remaining	O
4	O
numbers	O
,	O
which	O
must	O
be	O
decomposed	O
into	O
scaling	O
and	O
rotation	O
.	O

The	O
easiest	O
way	O
to	O
do	O
this	O
would	O
be	O
a	O
Singular	O
value	O
decomposition	O
:	O
Here	O
you	O
decompose	O
the	O
matrix	O
as	O
M=UDV	O
,	O
where	O
M	O
is	O
your	O
original	O
matrix	O

U	O
and	O
V	O
are	O
orthogonal	O
rotation	O
matrices	O
,	O
and	O
D	O
is	O
a	O
diagonal	O
matrix	O
.	O

This	O
represents	O
your	O
affine	O
transformation	O
as	O
three	O
steps	O
,	O
the	O
rotation	O
V	O
,	O
followed	O
by	O
scaling	O
D	O
,	O
and	O
rotation	O
U	O
.	O

The	O
two	O
entries	O
of	O
D	O
are	O
the	O
two	O
scaling	O
coefficients	O
for	O
x	O
and	O
y	O
.	O

From	O
U	O
and	O
V	O
you	O
can	O
obtain	O
the	O
rotation	O
angles	O
,	O
as	O
described	O
by	O
Mad	O
Physicist	O
.	O

The	O
total	O
rotation	O
is	O
the	O
sum	O
of	O
both	O
.	O

If	O
it	O
'	O
s	O
only	O
about	O
the	O
rotation	O
,	O
one	O
can	O
transform	O
the	O
vector	O
(	O
1	O
,	O
0	O
)	O
using	O
the	O
given	O
matrix	O
,	O
and	O
compute	O
the	O
angle	O
between	O
the	O
resulting	O
vector	O
and	O
the	O
x-axis	O
,	O
as	O
already	O
mentioned	O
in	O
the	O
comment	O
to	O
the	O
original	O
question	O
