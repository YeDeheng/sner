B-Fram	0	9	Hibernate
O	10	15	calls
O	16	21	flush
O	22	24	on
O	25	30	find-
O	31	37	causes
O	38	46	not-null
O	47	52	error

O	53	54	I
O	55	59	have
O	60	61	a
O	62	69	process
O	70	75	which
O	76	83	updates
O	84	85	a
O	86	90	tree
O	91	93	to
O	94	97	the
O	98	106	database
O	106	107	,
O	108	111	and
O	112	114	in
O	115	120	doing
O	121	123	so
O	123	124	,
O	125	133	performs
O	134	139	reads
O	140	142	to
O	143	148	check
O	149	152	for
O	153	163	duplicates
O	164	172	entities
O	172	173	.

O	174	177	I'm
O	178	185	finding
O	186	190	that
O	191	197	trying
O	198	200	to
O	201	203	do
O	204	205	a
B-API	206	229	criteria.uniqueResult()
O	230	236	midway
O	237	244	through
O	245	249	this
O	250	257	process
O	258	264	causes
O	265	268	the
O	269	278	following
O	279	284	error
O	285	286	:

B-API	287	323	org.hibernate.PropertyValueException
O	324	325	:
O	326	334	not-null
O	335	343	property
O	344	354	references
O	355	356	a
O	357	361	null
O	362	364	or
O	365	374	transient
O	375	380	value

O	381	388	Digging
O	389	396	through
O	397	400	the
O	401	406	stack
O	407	412	trace
O	412	413	,
O	414	415	I
O	416	419	see
O	420	424	that
O	425	428	the
B-API	429	443	uniqueResult()
O	444	446	is
O	447	455	flushing
O	456	459	the
O	460	467	session
O	467	468	,
O	469	479	attempting
O	480	482	to
O	483	490	perform
O	491	498	updates
O	499	503	that
O	504	510	aren't
O	511	516	ready
O	517	519	to
O	520	522	go
O	523	525	to
O	526	529	the
O	530	538	database
O	539	542	yet
O	542	543	.

O	544	563	@codeSnippetRemoved

O	564	568	Have
O	569	570	I
O	571	574	set
O	575	584	something
O	585	587	up
O	588	593	wrong
O	594	598	here
O	598	599	?

O	600	603	Any
O	604	608	help
O	609	616	greatly
O	617	628	appreciated
O	628	629	.

O	630	635	Marty

O	636	640	Turn
O	641	644	off
O	645	658	auto-flushing
O	659	661	on
O	662	665	the
O	666	673	Session
O	674	680	object
O	681	683	to
O	684	687	fix
O	688	692	this
O	693	702	exception
O	702	703	.

O	704	723	@codeSnippetRemoved

O	724	728	This
O	729	731	is
O	732	735	not
O	736	740	your
O	741	746	error
O	747	754	however
O	754	755	.

O	756	765	Something
O	766	773	earlier
O	774	776	in
O	777	781	your
O	782	786	code
O	787	789	is
O	790	797	causing
O	798	801	the
O	802	804	in
O	805	811	memory
O	812	819	objects
O	820	822	to
O	823	825	be
O	826	828	in
O	829	831	an
O	832	839	invalid
O	840	845	state
O	846	851	which
O	852	854	is
O	855	861	trying
O	862	864	to
O	865	867	be
O	868	877	persisted
O	878	880	to
O	881	884	the
O	885	887	DB
O	888	894	during
O	895	898	the
O	899	908	autoflush
O	908	909	.

B-Fram	910	919	hibernate
O	920	929	remembers
O	930	934	with
O	935	942	objects
O	943	948	needs
O	949	951	to
O	952	954	be
O	955	960	saved
O	960	961	.
O	962	966	when
O	967	974	issuing
O	975	976	a
O	977	983	select
O	983	984	,
B-Fram	985	994	hibernate
O	995	999	will
O	1000	1005	flush
O	1006	1011	these
O	1012	1019	changes
O	1019	1020	.
O	1021	1025	this
O	1026	1033	ensures
O	1034	1037	the
O	1038	1044	select
O	1045	1049	will
O	1050	1056	return
O	1057	1060	the
O	1061	1068	correct
O	1069	1076	results
O	1076	1077	.

O	1078	1085	setting
B-API	1086	1095	flushmode
O	1096	1098	to
O	1099	1107	anything
O	1108	1112	else
O	1113	1117	than
B-API	1118	1132	FlushMode.AUTO
O	1133	1137	will
O	1138	1145	prevent
O	1146	1150	this
O	1151	1160	behaviour
O	1160	1161	.

O	1162	1165	But
O	1166	1169	the
O	1170	1175	error
O	1176	1178	is
O	1179	1181	in
O	1182	1186	your
O	1187	1191	code
O	1191	1192	,
O	1193	1198	where
O	1199	1202	you
O	1203	1207	pass
O	1208	1210	an
O	1211	1221	incomplete
O	1222	1228	object
O	1229	1231	to
B-Fram	1232	1241	hibernate
O	1242	1244	to
O	1245	1252	persist
O	1253	1255	or
O	1256	1262	update
O	1262	1263	.

O	1264	1266	So
O	1267	1270	the
O	1271	1278	correct
O	1279	1287	solution
O	1288	1290	is
O	1291	1293	to
O	1294	1298	pass
O	1299	1302	the
O	1303	1309	object
O	1310	1315	later
O	1316	1318	to
B-Fram	1319	1328	hibernate
O	1328	1329	,
O	1330	1334	when
O	1335	1337	it
O	1338	1340	is
O	1341	1349	complete
O	1349	1350	.

O	1351	1355	I've
O	1356	1362	pulled
O	1363	1365	my
O	1366	1370	hair
O	1371	1374	out
O	1375	1379	many
O	1380	1385	times
O	1386	1392	trying
O	1393	1395	to
O	1396	1399	get
O	1400	1402	to
O	1403	1406	the
O	1407	1413	bottom
O	1414	1416	of
O	1417	1422	these
O	1423	1429	issues
O	1429	1430	.

O	1431	1434	The
O	1435	1442	problem
O	1443	1448	being
O	1449	1453	that
O	1454	1456	it
O	1457	1458	'
O	1459	1460	s
O	1461	1463	so
O	1464	1473	difficult
O	1474	1476	to
O	1477	1480	get
O	1481	1483	to
O	1484	1487	the
O	1488	1492	root
O	1493	1495	of
O	1496	1499	the
O	1500	1505	issue
O	1506	1513	causing
O	1514	1516	it
O	1516	1517	.

O	1518	1520	If
O	1521	1527	you're
O	1528	1535	nearing
O	1536	1540	your
O	1541	1545	wits
O	1546	1549	end
O	1550	1553	you
O	1554	1557	can
O	1558	1562	also
O	1563	1570	execute
O	1571	1574	the
O	1575	1585	supporting
O	1586	1593	queries
O	1594	1598	such
O	1599	1601	as
B-API	1602	1609	findAll
O	1610	1612	in
O	1613	1614	a
O	1615	1618	new
O	1619	1626	session
O	1627	1628	:
O	1629	1648	@codeSnippetRemoved

O	1649	1653	That
O	1654	1657	has
O	1658	1665	usually
O	1666	1678	circumvented
O	1679	1682	the
O	1683	1690	problem
O	1691	1694	for
O	1695	1697	me
O	1698	1700	in
O	1701	1705	most
O	1706	1711	cases
O	1711	1712	.
